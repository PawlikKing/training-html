<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test z Automatyzacji Procesów</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
        }
        
        body {
            background: #f5f5f5;
            color: #2c3e50;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            line-height: 1.6;
        }
        
        .container {
            max-width: 800px;
            width: 100%;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            padding: 40px;
            margin: 20px 0;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .header h1 {
            color: #2c3e50;
            font-size: 1.8rem;
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        .header p {
            color: #666;
            font-size: 0.95rem;
        }
        
        .progress-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 12px 0;
            font-size: 0.9rem;
            color: #666;
        }
        
        .progress-bar {
            flex-grow: 1;
            height: 6px;
            background-color: #e9ecef;
            border-radius: 3px;
            margin: 0 20px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: #4a90e2;
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .question-counter, .score-display {
            font-weight: 500;
            color: #2c3e50;
        }
        
        .question-box {
            margin-bottom: 30px;
        }
        
        .question-text {
            font-size: 1.1rem;
            font-weight: 500;
            margin-bottom: 24px;
            color: #2c3e50;
            line-height: 1.6;
        }
        
        .question-number {
            color: #4a90e2;
            font-weight: 600;
        }
        
        .answers-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .answer-option {
            background-color: #fafafa;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            padding: 16px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.95rem;
            display: flex;
            align-items: flex-start;
        }
        
        .answer-option:hover:not(.disabled) {
            background-color: #f0f0f0;
            border-color: #4a90e2;
        }
        
        .answer-option.selected {
            background-color: #e3f2fd;
            border-color: #4a90e2;
        }
        
        .answer-option.correct {
            background-color: #e8f5e9;
            border-color: #4caf50;
        }
        
        .answer-option.incorrect {
            background-color: #ffebee;
            border-color: #f44336;
        }
        
        .answer-option.disabled {
            cursor: not-allowed;
        }
        
        .answer-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-width: 28px;
            height: 28px;
            background-color: #e0e0e0;
            color: #666;
            border-radius: 4px;
            margin-right: 12px;
            font-weight: 600;
            font-size: 0.85rem;
            flex-shrink: 0;
        }
        
        .answer-option.selected .answer-letter {
            background-color: #4a90e2;
            color: white;
        }
        
        .answer-option.correct .answer-letter {
            background-color: #4caf50;
            color: white;
        }
        
        .answer-option.incorrect .answer-letter {
            background-color: #f44336;
            color: white;
        }
        
        .answer-text {
            flex: 1;
            line-height: 1.5;
        }
        
        .feedback {
            margin-top: 20px;
            padding: 12px 16px;
            border-radius: 6px;
            font-size: 0.95rem;
            display: none;
        }
        
        .feedback.correct {
            background-color: #e8f5e9;
            color: #2e7d32;
            border: 1px solid #4caf50;
        }
        
        .feedback.incorrect {
            background-color: #ffebee;
            color: #c62828;
            border: 1px solid #f44336;
        }
        
        .buttons-container {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            gap: 12px;
        }
        
        button {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-size: 0.95rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .next-btn {
            background: #4a90e2;
            color: white;
            margin-left: auto;
        }
        
        .next-btn:hover:not(:disabled) {
            background: #357abd;
        }
        
        .restart-btn {
            background-color: white;
            color: #666;
            border: 1px solid #e0e0e0;
        }
        
        .restart-btn:hover {
            background-color: #f5f5f5;
        }
        
        .summary-container {
            text-align: center;
            padding: 20px;
            display: none;
        }
        
        .summary-container h2 {
            color: #2c3e50;
            margin-bottom: 30px;
            font-size: 1.6rem;
            font-weight: 600;
        }
        
        .score-circle {
            width: 160px;
            height: 160px;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin: 0 auto 30px;
            font-weight: 600;
            background: #f5f5f5;
            color: #2c3e50;
            border: 3px solid #4a90e2;
        }
        
        .score-value {
            font-size: 3rem;
            line-height: 1;
        }
        
        .score-percentage {
            font-size: 1.2rem;
            color: #666;
            margin-top: 4px;
        }
        
        .passed {
            color: #4caf50;
            font-size: 1.3rem;
            font-weight: 600;
            margin: 20px 0;
        }
        
        .failed {
            color: #f44336;
            font-size: 1.3rem;
            font-weight: 600;
            margin: 20px 0;
        }
        
        .summary-details {
            background-color: #fafafa;
            border-radius: 6px;
            padding: 20px;
            margin-top: 30px;
            text-align: left;
        }
        
        .summary-details h3 {
            color: #2c3e50;
            margin-bottom: 16px;
            font-size: 1.1rem;
            font-weight: 600;
        }
        
        .summary-list {
            list-style-type: none;
        }
        
        .summary-list li {
            padding: 12px 0;
            border-bottom: 1px solid #e0e0e0;
            font-size: 0.9rem;
        }
        
        .summary-list li:last-child {
            border-bottom: none;
        }
        
        .correct-answer {
            color: #4caf50;
            font-weight: 600;
        }
        
        .incorrect-answer {
            color: #f44336;
            font-weight: 600;
        }
        
        .footer {
            text-align: center;
            color: #999;
            margin-top: 20px;
            font-size: 0.85rem;
        }
        
        .start-screen {
            text-align: center;
            padding: 20px;
        }
        
        .start-screen h2 {
            color: #2c3e50;
            margin-bottom: 16px;
            font-size: 1.4rem;
            font-weight: 600;
        }
        
        .start-btn {
            background: #4a90e2;
            color: white;
            padding: 14px 32px;
            font-size: 1rem;
            margin-top: 30px;
        }
        
        .start-btn:hover {
            background: #357abd;
        }
        
        .instructions {
            background-color: #fafafa;
            border-radius: 6px;
            padding: 24px;
            margin-top: 24px;
            text-align: left;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .instructions h3 {
            color: #2c3e50;
            margin-bottom: 16px;
            font-size: 1.1rem;
            font-weight: 600;
        }
        
        .instructions ul {
            padding-left: 24px;
            margin-bottom: 16px;
        }
        
        .instructions li {
            margin-bottom: 8px;
            line-height: 1.6;
            font-size: 0.95rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Test z Automatyzacji Procesów</h1>
            <p>Kompletny test - wszystkie 32 pytania</p>
        </div>
        
        <div class="progress-container">
            <div class="question-counter">Pytanie: <span id="current-question">0</span>/<span id="total-questions">0</span></div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <div class="score-display">Wynik: <span id="current-score">0</span> pkt</div>
        </div>
        
        <div id="question-container" style="display: none;">
            <div class="question-box">
                <div class="question-text" id="question-text"></div>
                <div class="answers-container" id="answers-container"></div>
                <div class="feedback" id="feedback"></div>
            </div>
            
            <div class="buttons-container">
                <button class="restart-btn" id="restart-btn">Restart</button>
                <button class="next-btn" id="next-btn" disabled>Przejdź dalej</button>
            </div>
        </div>
        
        <div id="summary-container" class="summary-container">
            <h2>Podsumowanie testu</h2>
            <div class="score-circle">
                <div class="score-value" id="final-score">0</div>
                <div class="score-percentage" id="final-percentage">0%</div>
            </div>
            <div id="result-message"></div>
            
            <div class="summary-details">
                <h3>Szczegóły odpowiedzi</h3>
                <ul class="summary-list" id="answers-summary"></ul>
            </div>
            
            <button class="restart-btn" id="restart-summary-btn" style="margin-top: 30px;">Rozpocznij nowy test</button>
        </div>
        
        <div id="start-screen" class="start-screen">
            <h2>Gotowy na sprawdzenie wiedzy?</h2>
            <p>Test zawiera <strong>wszystkie 32 pytania</strong> z automatyzacji procesów</p>
            
            <div class="instructions">
                <h3>Instrukcja</h3>
                <ul>
                    <li>Test zawiera <strong>wszystkie 32 pytania</strong> z pliku PDF</li>
                    <li>Odpowiedzi są losowo mieszane w każdym pytaniu</li>
                    <li>Po wybraniu odpowiedzi zobaczysz czy była poprawna</li>
                    <li>Za każdą poprawną odpowiedź otrzymasz 1 punkt</li>
                    <li>Do zaliczenia potrzeba <strong>70%</strong> (23/32 punkty)</li>
                    <li>Możesz zrestartować test w dowolnym momencie</li>
                </ul>
                <p style="text-align: center; font-weight: 600; color: #4a90e2;">Powodzenia!</p>
            </div>
            
            <button class="start-btn" id="start-btn">Rozpocznij test</button>
        </div>
    </div>
    
    <div class="footer">
        <p>Test z automatyzacji procesów • 32 pytania</p>
    </div>

    <script>
        // KOMPLETNE dane pytań - wszystkie 32 pytania z pliku PDF
        const allQuestions = [
            // Pojęcia podstawowe i zadania automatyki (6 pytań)
            {
                category: "Pojęcia podstawowe i zadania automatyki",
                question: "1. Czym zajmuje się automatyka?",
                answers: [
                    "Automatyka zajmuje się samoczynnym sterowaniem obiektami i procesami w celu utrzymania zadanych warunków pracy przy ograniczonym lub wyeliminowanym udziale człowieka.",
                    "Automatyka zajmuje się programowaniem robotów przemysłowych.",
                    "Automatyka zajmuje się projektowaniem układów elektronicznych.",
                    "Automatyka zajmuje się optymalizacją procesów produkcyjnych."
                ],
                correct: 0
            },
            {
                category: "Pojęcia podstawowe i zadania automatyki",
                question: "2. Co nazywamy sygnałem zakłócającym?",
                answers: [
                    "Sygnał zakłócający to sygnał wejściowy mający niekorzystny wpływ na wartość sygnału wyjściowego układu.",
                    "Sygnał zakłócający to sygnał wyjściowy układu sterowania.",
                    "Sygnał zakłócający to sygnał referencyjny porównywany z sygnałem wyjściowym.",
                    "Sygnał zakłócający to szum występujący w układach pomiarowych."
                ],
                correct: 0
            },
            {
                category: "Pojęcia podstawowe i zadania automatyki",
                question: "3. Czym charakteryzuje się otwarty układ sterowania?",
                answers: [
                    "Brakiem sprzężenia zwrotnego – sygnał wyjściowy nie wpływa na sterowanie.",
                    "Obecnością sprzężenia zwrotnego – sygnał wyjściowy jest porównywany z zadanym.",
                    "Zawsze zawiera regulator PID.",
                    "Jest zawsze niestabilny."
                ],
                correct: 0
            },
            {
                category: "Pojęcia podstawowe i zadania automatyki",
                question: "4. Jakie są cechy elementu liniowego?",
                answers: [
                    "Spełnia zasadę superpozycji i jest opisywany równaniami liniowymi.",
                    "Ma nieliniową charakterystykę statyczną.",
                    "Jest wrażliwy na warunki początkowe.",
                    "Ma tylko jeden stan stabilny."
                ],
                correct: 0
            },
            {
                category: "Pojęcia podstawowe i zadania automatyki",
                question: "5. Co nazywamy obiektem sterowania?",
                answers: [
                    "Fizyczny obiekt lub proces, na który oddziałuje układ sterowania.",
                    "Układ sterujący procesem technologicznym.",
                    "Czujnik mierzący wartość regulowaną.",
                    "Urządzenie wykonawcze zmieniające stan obiektu."
                ],
                correct: 0
            },
            {
                category: "Pojęcia podstawowe i zadania automatyki",
                question: "6. Jak definiowana jest zmienna sterowana?",
                answers: [
                    "Jest to wielkość mierzona i regulowana, zwykle będąca sygnałem wyjściowym układu.",
                    "Jest to sygnał zadany wprowadzany przez operatora.",
                    "Jest to sygnał zakłócający działanie układu.",
                    "Jest to różnica między wartością zadaną a rzeczywistą."
                ],
                correct: 0
            },
            // Transformacja Laplace'a (5 pytań)
            {
                category: "Transformacja Laplace'a",
                question: "1. Do czego służy transformata Laplace'a?",
                answers: [
                    "Do rozwiązywania liniowych równań różniczkowych poprzez ich algebraizację.",
                    "Do analizy nieliniowych układów dynamicznych.",
                    "Do projektowania regulatorów adaptacyjnych.",
                    "Do wyznaczania charakterystyk czasowych układów."
                ],
                correct: 0
            },
            {
                category: "Transformacja Laplace'a",
                question: "2. Jak definiuje się transformatę Laplace'a funkcji f(t)?",
                answers: [
                    "Całka od 0 do nieskończoności z f(t)·e^(-st)dt",
                    "Całka od minus do plus nieskończoności z f(t)·e^(-st)dt",
                    "Suma od n=0 do nieskończoności z f(nT)·e^(-snT)",
                    "1/(2πj) razy całka z F(s)·e^(st)ds"
                ],
                correct: 0
            },
            {
                category: "Transformacja Laplace'a",
                question: "3. Jaki symbol jest stosowany dla operatora Laplace'a?",
                answers: [
                    "Symbol s (zmienna zespolona).",
                    "Symbol p (parametr).",
                    "Symbol z (operator przekształcenia Z).",
                    "Symbol ω (częstotliwość)."
                ],
                correct: 0
            },
            {
                category: "Transformacja Laplace'a",
                question: "4. Jaka jest transformata Laplace'a skoku jednostkowego funkcji 1(t)?",
                answers: [
                    "L{1(t)} = 1/s",
                    "L{1(t)} = 1",
                    "L{1(t)} = 1/s²",
                    "L{1(t)} = e^(-s)"
                ],
                correct: 0
            },
            {
                category: "Transformacja Laplace'a",
                question: "5. Transformata Laplace'a pierwszej pochodnej funkcji f(t) ma postać:",
                answers: [
                    "L{f'(t)} = sF(s) - f(0)",
                    "L{f'(t)} = sF(s)",
                    "L{f'(t)} = F(s) - f(0)",
                    "L{f'(t)} = F(s)/s - f(0)"
                ],
                correct: 0
            },
            // Modelowanie układów automatyki (6 pytań)
            {
                category: "Modelowanie układów automatyki",
                question: "1. Co jest celem modelowania matematycznego układów dynamicznych?",
                answers: [
                    "Opis zachowania układu w celu analizy i syntezy sterowania.",
                    "Uproszczenie układu do postaci nieredukowalnej.",
                    "Zastąpienie układu fizycznego modelem komputerowym.",
                    "Określenie kosztów implementacji układu sterowania."
                ],
                correct: 0
            },
            {
                category: "Modelowanie układów automatyki",
                question: "2. Jak najczęściej przedstawia się modele układów dynamicznych?",
                answers: [
                    "Równania różniczkowe oraz transmitancje operatorowe.",
                    "Wykresy i diagramy blokowe.",
                    "Tabele wartości i charakterystyki statyczne.",
                    "Algorytmy sterowania i programy komputerowe."
                ],
                correct: 0
            },
            {
                category: "Modelowanie układów automatyki",
                question: "3. Jak definiuje się transmitancję operatorową?",
                answers: [
                    "Stosunek transformaty Laplace'a wyjścia do wejścia przy zerowych warunkach początkowych.",
                    "Stosunek wartości wyjścia do wejścia w stanie ustalonym.",
                    "Różnicę między transformatami wyjścia i wejścia.",
                    "Całkę z iloczynu transformaty wyjścia i wejścia."
                ],
                correct: 0
            },
            {
                category: "Modelowanie układów automatyki",
                question: "4. Jakie równanie opisuje zależność siły w sprężynie od deformacji?",
                answers: [
                    "F = kx (Równanie sprężyny)",
                    "F = c · dy/dt",
                    "F = m · d²x/dt²",
                    "F = k/x"
                ],
                correct: 0
            },
            {
                category: "Modelowanie układów automatyki",
                question: "5. Jaki element mechaniczny opisuje równanie F = c·(dy/dt)?",
                answers: [
                    "Tłumik lepki",
                    "Sprężyna",
                    "Masa",
                    "Wahadło"
                ],
                correct: 0
            },
            {
                category: "Modelowanie układów automatyki",
                question: "6. Co w analogii elektromechanicznej odpowiada masie?",
                answers: [
                    "Indukcyjność",
                    "Pojemność",
                    "Rezystancja",
                    "Napięcie"
                ],
                correct: 0
            },
            // Właściwości dynamiczne elementów automatyki (6 pytań)
            {
                category: "Właściwości dynamiczne elementów automatyki",
                question: "1. Co jest celem modelowania matematycznego układów dynamicznych?",
                answers: [
                    "Analiza zachowania dynamicznego układu.",
                    "Projektowanie układów sterowania.",
                    "Minimalizacja kosztów implementacji.",
                    "Optymalizacja zużycia energii."
                ],
                correct: 0
            },
            {
                category: "Właściwości dynamiczne elementów automatyki",
                question: "2. Jaka jest ogólna postać transmitancji elementu proporcjonalnego?",
                answers: [
                    "G(s) = K",
                    "G(s) = K/s",
                    "G(s) = K/(Ts + 1)",
                    "G(s) = K · s"
                ],
                correct: 0
            },
            {
                category: "Właściwości dynamiczne elementów automatyki",
                question: "3. Jaka jest ogólna postać transmitancji elementu całkującego?",
                answers: [
                    "G(s) = K/s",
                    "G(s) = K",
                    "G(s) = K/(Ts + 1)",
                    "G(s) = K · s"
                ],
                correct: 0
            },
            {
                category: "Właściwości dynamiczne elementów automatyki",
                question: "4. Jaka jest ogólna postać transmitancji elementu inercyjnego pierwszego rzędu?",
                answers: [
                    "G(s) = K/(Ts + 1)",
                    "G(s) = K",
                    "G(s) = K/s",
                    "G(s) = K/(T²s² + 2ξTs + 1)"
                ],
                correct: 0
            },
            {
                category: "Właściwości dynamiczne elementów automatyki",
                question: "5. Jaka jest ogólna postać transmitancji elementu oscylacyjnego drugiego rzędu?",
                answers: [
                    "G(s) = K/(T²s² + 2ξTs + 1)",
                    "G(s) = K/(Ts + 1)",
                    "G(s) = K/s",
                    "G(s) = K"
                ],
                correct: 0
            },
            {
                category: "Właściwości dynamiczne elementów automatyki",
                question: "6. Jaka wielkość charakteryzuje element inercyjny pierwszego rzędu?",
                answers: [
                    "Stała czasowa T",
                    "Wzmocnienie K",
                    "Częstotliwość drgań własnych",
                    "Współczynnik tłumienia ξ"
                ],
                correct: 0
            },
            // Liniowe układy regulacji (6 pytań)
            {
                category: "Liniowe układy regulacji",
                question: "1. Jaki jest podstawy cel układu regulacji stałowartościowej?",
                answers: [
                    "Utrzymanie stałej wartości zadanej.",
                    "Śledzenie zmiennej wartości zadanej.",
                    "Minimalizacja zużycia energii.",
                    "Maksymalizacja wydajności procesu."
                ],
                correct: 0
            },
            {
                category: "Liniowe układy regulacji",
                question: "2. Co oznacza pojęcie uchyb regulacji?",
                answers: [
                    "Różnica między wartością zadaną a rzeczywistą.",
                    "Różnica między wartością zakłócenia a sterowaniem.",
                    "Różnica między wartością wyjściową a wejściową.",
                    "Różnica między wartością początkową a końcową."
                ],
                correct: 0
            },
            {
                category: "Liniowe układy regulacji",
                question: "3. Jakim równaniem opisany jest regulator proporcjonalny (P)?",
                answers: [
                    "u(t) = Kp·e(t)",
                    "u(t) = Kp·e(t) + Ki·∫e(t)dt",
                    "u(t) = Kp·e(t) + Kd·de(t)/dt",
                    "u(t) = Ki·∫e(t)dt"
                ],
                correct: 0
            },
            {
                category: "Liniowe układy regulacji",
                question: "4. Jakim równaniem opisany jest regulator proporcjonalno-różniczkujący (PD)?",
                answers: [
                    "u(t) = Kp·e(t) + Kd·de(t)/dt",
                    "u(t) = Kp·e(t)",
                    "u(t) = Kp·e(t) + Ki·∫e(t)dt",
                    "u(t) = Kd·de(t)/dt"
                ],
                correct: 0
            },
            {
                category: "Liniowe układy regulacji",
                question: "5. Jak zachowuje się regulator dwupołożeniowy?",
                answers: [
                    "Przełącza się między dwoma stanami.",
                    "Płynnie zmienia wartość sygnału sterującego.",
                    "Utrzymuje stałą wartość sygnału wyjściowego.",
                    "Generuje sygnał sinusoidalny."
                ],
                correct: 0
            },
            {
                category: "Liniowe układy regulacji",
                question: "6. Czym jest obszar histerezy w regulatorze dwupołożeniowym?",
                answers: [
                    "Zakres nieczułości zapobiegający częstym przełączeniom.",
                    "Obszar, w którym regulator jest nieaktywny.",
                    "Zakres wartości, w którym regulator działa proporcjonalnie.",
                    "Obszar niestabilności układu."
                ],
                correct: 0
            },
            // Stabilność układów sterowania (6 pytań) - DODAŁEM BRAKUJĄCE 3 PYTANIA
            {
                category: "Stabilność układów sterowania",
                question: "1. Co oznacza stabilność układu automatycznej regulacji?",
                answers: [
                    "Zdolność do powrotu do stanu równowagi po zakłóceniu.",
                    "Zdolność do śledzenia zmiennej wartości zadanej.",
                    "Niezmienność parametrów układu w czasie.",
                    "Odporność na uszkodzenia elementów."
                ],
                correct: 0
            },
            {
                category: "Stabilność układów sterowania",
                question: "2. Co decyduje o stabilności układu liniowego według równań charakterystycznych?",
                answers: [
                    "Pierwiastki równania charakterystycznego",
                    "Wartość wzmocnienia układu",
                    "Stała czasowa elementów układu",
                    "Częstotliwość drgań własnych"
                ],
                correct: 0
            },
            {
                category: "Stabilność układów sterowania",
                question: "3. Kiedy układ jest stabilny asymptotycznie?",
                answers: [
                    "Gdy wszystkie pierwiastki mają ujemne części rzeczywiste.",
                    "Gdy wszystkie pierwiastki mają dodatnie części rzeczywiste.",
                    "Gdy wszystkie pierwiastki mają zerowe części rzeczywiste.",
                    "Gdy wszystkie pierwiastki są rzeczywiste."
                ],
                correct: 0
            },
            {
                category: "Stabilność układów sterowania",
                question: "4. Jakie jest podstawowe wymaganie kryterium Hurwitza?",
                answers: [
                    "Warunki na współczynniki wielomianu charakterystycznego",
                    "Obliczenie pierwiastków równania charakterystycznego",
                    "Analiza odpowiedzi skokowej układu",
                    "Wyznaczenie charakterystyki amplitudowo-fazowej"
                ],
                correct: 0
            },
            {
                category: "Stabilność układów sterowania",
                question: "5. Co oznacza uchyb statyczny układu regulacji?",
                answers: [
                    "Uchyb w stanie ustalonym.",
                    "Uchyb w stanie nieustalonym.",
                    "Maksymalny uchyb w trakcie regulacji.",
                    "Uchyb w chwili początkowej."
                ],
                correct: 0
            },
            {
                category: "Stabilność układów sterowania",
                question: "6. Który parametr opisuje jakość dynamiczną układu?",
                answers: [
                    "Czas regulacji, przeregulowanie, tłumienie.",
                    "Wzmocnienie, stała czasowa, częstotliwość.",
                    "Napięcie, prąd, moc.",
                    "Temperatura, ciśnienie, przepływ."
                ],
                correct: 0
            },
            // Synteza układów liniowych sterowania automatycznego (4 pytania) - DODAŁEM BRAKUJĄCE 4-TE PYTANIE
            {
                category: "Synteza układów liniowych sterowania automatycznego",
                question: "1. Jakie są etapy synteza układów sterowania?",
                answers: [
                    "Modelowanie → analiza → dobór regulatora → strojenie",
                    "Analiza → modelowanie → strojenie → implementacja",
                    "Dobór regulatora → analiza → modelowanie → strojenie",
                    "Strojenie → implementacja → testowanie → analiza"
                ],
                correct: 0
            },
            {
                category: "Synteza układów liniowych sterowania automatycznego",
                question: "2. Na czym polega klasyczna metoda syntezy sterowania układami liniowymi?",
                answers: [
                    "Dobór regulatora na podstawie charakterystyk układu",
                    "Optymalizacja parametrów regulatora za pomocą algorytmów genetycznych",
                    "Projektowanie regulatora adaptacyjnego",
                    "Dobór regulatora na podstawie symulacji komputerowej"
                ],
                correct: 0
            },
            {
                category: "Synteza układów liniowych sterowania automatycznego",
                question: "3. Jaki parametr wyznacza się w drugiej metodzie Zieglera-Nicholsa?",
                answers: [
                    "Wzmocnienie krytyczne Ku i okres oscylacji Tu",
                    "Czas narastania i przeregulowanie",
                    "Uchyb statyczny i dynamiczny",
                    "Charakterystykę amplitudowo-fazową"
                ],
                correct: 0
            },
            {
                category: "Synteza układów liniowych sterowania automatycznego",
                question: "4. Czym jest wzmocnienie krytyczne Kkr w drugiej metodzie Zieglera-Nicholsa?",
                answers: [
                    "Największe wzmocnienie, przy którym układ jest na granicy stabilności",
                    "Najmniejsze wzmocnienie zapewniające stabilność układu",
                    "Wzmocnienie zapewniające zerowy uchyb statyczny",
                    "Wzmocnienie optymalne ze względu na kryterium jakości"
                ],
                correct: 0
            }
        ];

        // ================================================
        //    LOGIKA TESTU – poprawiona wersja
        // ================================================

        let questions = [];               // aktualna, przetasowana lista pytań
        let currentIndex = 0;
        let score = 0;
        let userAnswers = [];             // {qIndex, selectedOriginal, correct}
        let selected = null;              // aktualnie wybrana odpowiedź (index po przetasowaniu)

        const questionTextEl = document.getElementById('question-text');
        const answersContainer = document.getElementById('answers-container');
        const feedbackEl = document.getElementById('feedback');
        const nextBtn = document.getElementById('next-btn');
        const scoreEl = document.getElementById('current-score');
        const progressFill = document.getElementById('progress-fill');
        const currentQEl = document.getElementById('current-question');
        const totalQEl = document.getElementById('total-questions');
        const finalScoreEl = document.getElementById('final-score');
        const finalPercentageEl = document.getElementById('final-percentage');
        const resultMessageEl = document.getElementById('result-message');
        const answersSummaryEl = document.getElementById('answers-summary');

        function initTest() {
            questions = [...allQuestions].sort(() => Math.random() - 0.5);
            currentIndex = 0;
            score = 0;
            userAnswers = [];
            selected = null;
            
            document.getElementById('start-screen').style.display = 'none';
            document.getElementById('question-container').style.display = 'block';
            document.getElementById('summary-container').style.display = 'none';
            
            totalQEl.textContent = questions.length;
            showQuestion();
        }

        function showQuestion() {
            const q = questions[currentIndex];
            questionTextEl.innerHTML = `
                <div style="color:#4a90e2; font-size:0.9rem; margin-bottom:8px;">
                    ${q.category}
                </div>
                <span class="question-number">Pytanie ${currentIndex+1}:</span> ${q.question}
            `;

            // Tasujemy odpowiedzi
            const shuffled = [...q.answers]
                .map((text, originalIndex) => ({text, originalIndex}))
                .sort(() => Math.random() - 0.5);

            answersContainer.innerHTML = '';
            shuffled.forEach(({text, originalIndex}, i) => {
                const div = document.createElement('div');
                div.className = 'answer-option';
                div.innerHTML = `
                    <div class="answer-letter">${String.fromCharCode(65+i)}</div>
                    <div class="answer-text">${text}</div>
                `;
                div.dataset.original = originalIndex;
                div.addEventListener('click', () => selectAnswer(i, originalIndex, div));
                answersContainer.appendChild(div);
            });

            selected = null;
            nextBtn.disabled = true;
            nextBtn.textContent = currentIndex < questions.length - 1 ? "Przejdź dalej" : "Zakończ test";
            feedbackEl.style.display = 'none';
            feedbackEl.className = 'feedback';
            updateProgress();
        }

        function selectAnswer(shuffledIndex, originalIndex, element) {
            if (element.classList.contains('disabled')) return; // już sprawdzone

            // odznacz wszystkie
            document.querySelectorAll('.answer-option').forEach(el => {
                el.classList.remove('selected');
            });
            element.classList.add('selected');
            
            selected = { shuffledIndex, originalIndex };
            nextBtn.disabled = false;
        }

        function nextQuestion() {
            if (selected === null) return;

            // jeszcze nie sprawdzaliśmy odpowiedzi → sprawdzamy
            if (feedbackEl.style.display !== 'block') {
                checkAnswer();
                return;
            }

            // zapisujemy odpowiedź
            const q = questions[currentIndex];
            const isCorrect = selected.originalIndex === q.correct;
            
            userAnswers.push({
                questionIndex: currentIndex,
                questionText: q.question,
                selectedOriginal: selected.originalIndex,
                correctOriginal: q.correct,
                isCorrect
            });

            if (isCorrect) score++;

            currentIndex++;

            if (currentIndex < questions.length) {
                showQuestion();
            } else {
                showSummary();
            }
        }

        function checkAnswer() {
            if (!selected) return;

            const q = questions[currentIndex];
            const isCorrect = selected.originalIndex === q.correct;

            // Znajdź indeks poprawnej odpowiedzi po przetasowaniu
            let correctShuffledIndex = -1;
            const answerElements = document.querySelectorAll('.answer-option');
            answerElements.forEach((el, idx) => {
                const orig = parseInt(el.dataset.original);
                if (orig === q.correct) {
                    correctShuffledIndex = idx;
                    el.classList.add('correct');
                } else if (orig === selected.originalIndex) {
                    el.classList.add('incorrect');
                }
                el.classList.add('disabled');
            });

            // Wyświetl feedback
            const correctLetter = correctShuffledIndex !== -1 ? String.fromCharCode(65 + correctShuffledIndex) : '?';
            
            if (isCorrect) {
                feedbackEl.textContent = "✓ Poprawna odpowiedź!";
                feedbackEl.className = 'feedback correct';
            } else {
                feedbackEl.textContent = `✗ Niepoprawna. Poprawna odpowiedź to: ${correctLetter}`;
                feedbackEl.className = 'feedback incorrect';
            }
            
            feedbackEl.style.display = 'block';

            scoreEl.textContent = score;
            nextBtn.textContent = currentIndex < questions.length - 1 ? "Następne pytanie" : "Zakończ i zobacz wynik";
        }

        function updateProgress() {
            const progress = ((currentIndex + 1) / questions.length) * 100;
            progressFill.style.width = progress + '%';
            currentQEl.textContent = currentIndex + 1;
            scoreEl.textContent = score;
        }

        function showSummary() {
            document.getElementById('question-container').style.display = 'none';
            document.getElementById('summary-container').style.display = 'block';

            const percent = Math.round((score / questions.length) * 100);
            finalScoreEl.textContent = score;
            finalPercentageEl.textContent = percent + '%';

            const msg = percent >= 70 
                ? `<div class="passed">✓ Test zaliczony! (${percent}%)</div>`
                : `<div class="failed">✗ Test niezaliczony (${percent}%)</div>`;
            
            resultMessageEl.innerHTML = msg;

            // Szczegóły odpowiedzi
            answersSummaryEl.innerHTML = '';

            userAnswers.forEach((ans, i) => {
                const q = questions[ans.questionIndex];
                const userLetter = String.fromCharCode(65 + ans.selectedOriginal);
                const correctLetter = String.fromCharCode(65 + ans.correctOriginal);

                const li = document.createElement('li');
                li.innerHTML = `
                    <div><strong>${i+1}.</strong> ${q.question.substring(0,70)}${q.question.length>70?'...':''}</div>
                    <div>
                        Twoja: <span class="${ans.isCorrect?'correct-answer':'incorrect-answer'}">${userLetter}</span>
                        ${ans.isCorrect ? '' : ` | Poprawna: <span class="correct-answer">${correctLetter}</span>`}
                    </div>
                `;
                answersSummaryEl.appendChild(li);
            });
        }

        // Event listeners
        document.getElementById('start-btn').addEventListener('click', initTest);
        document.getElementById('next-btn').addEventListener('click', nextQuestion);
        document.getElementById('restart-btn').addEventListener('click', () => location.reload());
        document.getElementById('restart-summary-btn').addEventListener('click', () => location.reload());
    </script>
</body>
</html>
